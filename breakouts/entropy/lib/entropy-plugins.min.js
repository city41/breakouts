/**
* entropy.js 0.1.0 - framework for making games and not only games in entity system manner - build: 2015-07-22
*
* @author       Tymoteusz Dzienniak <tymoteusz.dzienniak@outlook.com>
* @license      {@link https://github.com/RainPhilosopher/Entropy/blob/master/LICENSE|MIT License}
*/

!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){(function(a){function b(a,b){for(var c=0,d=a.length-1;d>=0;d--){var e=a[d];"."===e?a.splice(d,1):".."===e?(a.splice(d,1),c++):c&&(a.splice(d,1),c--)}if(b)for(;c--;c)a.unshift("..");return a}function d(a,b){if(a.filter)return a.filter(b);for(var c=[],d=0;d<a.length;d++)b(a[d],d,a)&&c.push(a[d]);return c}var e=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,f=function(a){return e.exec(a).slice(1)};c.resolve=function(){for(var c="",e=!1,f=arguments.length-1;f>=-1&&!e;f--){var g=f>=0?arguments[f]:a.cwd();if("string"!=typeof g)throw new TypeError("Arguments to path.resolve must be strings");g&&(c=g+"/"+c,e="/"===g.charAt(0))}return c=b(d(c.split("/"),function(a){return!!a}),!e).join("/"),(e?"/":"")+c||"."},c.normalize=function(a){var e=c.isAbsolute(a),f="/"===g(a,-1);return a=b(d(a.split("/"),function(a){return!!a}),!e).join("/"),a||e||(a="."),a&&f&&(a+="/"),(e?"/":"")+a},c.isAbsolute=function(a){return"/"===a.charAt(0)},c.join=function(){var a=Array.prototype.slice.call(arguments,0);return c.normalize(d(a,function(a,b){if("string"!=typeof a)throw new TypeError("Arguments to path.join must be strings");return a}).join("/"))},c.relative=function(a,b){function d(a){for(var b=0;b<a.length&&""===a[b];b++);for(var c=a.length-1;c>=0&&""===a[c];c--);return b>c?[]:a.slice(b,c-b+1)}a=c.resolve(a).substr(1),b=c.resolve(b).substr(1);for(var e=d(a.split("/")),f=d(b.split("/")),g=Math.min(e.length,f.length),h=g,i=0;g>i;i++)if(e[i]!==f[i]){h=i;break}for(var j=[],i=h;i<e.length;i++)j.push("..");return j=j.concat(f.slice(h)),j.join("/")},c.sep="/",c.delimiter=":",c.dirname=function(a){var b=f(a),c=b[0],d=b[1];return c||d?(d&&(d=d.substr(0,d.length-1)),c+d):"."},c.basename=function(a,b){var c=f(a)[2];return b&&c.substr(-1*b.length)===b&&(c=c.substr(0,c.length-b.length)),c},c.extname=function(a){return f(a)[3]};var g="b"==="ab".substr(-1)?function(a,b,c){return a.substr(b,c)}:function(a,b,c){return 0>b&&(b=a.length+b),a.substr(b,c)}}).call(this,a("_process"))},{_process:2}],2:[function(a,b,c){function d(){k=!1,h.length?j=h.concat(j):l=-1,j.length&&e()}function e(){if(!k){var a=setTimeout(d);k=!0;for(var b=j.length;b;){for(h=j,j=[];++l<b;)h[l].run();l=-1,b=j.length}h=null,k=!1,clearTimeout(a)}}function f(a,b){this.fun=a,this.array=b}function g(){}var h,i=b.exports={},j=[],k=!1,l=-1;i.nextTick=function(a){var b=new Array(arguments.length-1);if(arguments.length>1)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];j.push(new f(a,b)),1!==j.length||k||setTimeout(e,0)},f.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.binding=function(a){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(a){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],3:[function(a,b,c){var d=Entropy.Utils.is;Animation=function(a,b,c){Entropy.EventEmitter.call(this),this._frames=a,this._fps=b||30,this._loop=c,this._state=Animation.INITIAL,this._frameTime=1e3/b,this._reversed=!1,this._currentFrame=a[0],this._currentFrameIndex=0,this._currentFrameTime=0,this._sprite=new PIXI.Sprite(a[0].texture),this._sprite.anchor.x=.5,this._sprite.anchor.y=.5},Entropy.Utils.extend(Animation.prototype,Entropy.EventEmitter.prototype),Entropy.Utils.extend(Animation.prototype,{play:function(){this._state!==Animation.PLAYING&&(this._state=Animation.PLAYING,this.emit("start"))},stop:function(){(this._state===Animation.PLAYING||this._state===Animation.PAUSED)&&(this._state=Animation.STOPPED,this._resetAnimation(),this.emit("stop"))},pause:function(){this._state===Animation.PLAYING&&(this._state=Animation.PAUSED,this.emit("pause"))},resume:function(){this._state===Animation.PAUSED&&(this._state=Animation.PLAYING,this.emit("resume"))},reverse:function(){this._reversed=!this._reversed},addFrame:function(a){this._frames.push()},nextFrame:function(){var a,b;if(a=this._reversed?this._currentFrameIndex-1:this._currentFrameIndex+1,this._loop)-1===a?a=this._frames.length-1:a===this._frames.length&&(a=0);else if(-1===a||a===this._frames.length)return this._state=Animation.ENDED,void this.emit("end");b=this._frames[a],null!=b&&(this._currentFrame=b,this._currentFrameIndex=a,this._updateSpriteTexture())},gotoFrame:function(a){var b,c;if(d.number(a))b=this._frames[a],c=a;else{if(!d.unemptyString(a))return;for(var e=0;e<this._frames.length;e++)if(this._frames[e].name===a){b=this._frames[e],c=e;break}}null!=b&&(this._currentFrame=b,this._currentFrameIndex=c,this._currentFrameTime=0,this._updateSpriteTexture())},update:function(a){this._state===Entropy.Animation.PLAYING&&(this._currentFrameTime>=this._frameTime&&(this.emit("frameChange"),this._currentFrame=this.nextFrame(),this._currentFrameTime=0),this._currentFrameTime+=a)},getAnimationSprite:function(){return this._sprite},_updateSpriteTexture:function(){this._sprite.texture=this._currentFrame.texture},_resetAnimation:function(){this._currentFrame=this._frames[0],this._currentFrameIndex=0,this._currentFrameTime=0,this._updateSpriteTexture()}}),Animation.PLAYING=0,Animation.PAUSED=1,Animation.STOPPED=2,Animation.PLAYING=3,Animation.INITIAL=4,Animation.ENDED=5,Entropy.Animation=Animation},{}],4:[function(a,b,c){},{}],5:[function(a,b,c){Entropy.Frame=function(a,b){this.texture=a,this.name=b},Entropy.Utils.extend(Entropy.Frame.prototype,{})},{}],6:[function(a,b,c){a("./Frame"),a("./Animation"),a("./AnimationManager")},{"./Animation":3,"./AnimationManager":4,"./Frame":5}],7:[function(a,b,c){a("./animation"),a("./input"),a("./loader")},{"./animation":6,"./input":8,"./loader":12}],8:[function(a,b,c){"use strict";function d(){var a=this;this._pressedKeys=[],this._pressedKeysTime=[],this._oncePressedKeys=[],this._mousePosition={x:0,y:0},this._handleKeyDown=function(b){var c=b.keyCode;a._pressedKeys[c]=!0,a._pressedKeysTime[c]||(a._pressedKeysTime[c]=performance.now())},this._handleKeyUp=function(b){var c=b.keyCode;a._pressedKeys[c]=!1,null!=a._pressedKeysTime[c]&&null==a._oncePressedKeys[c]&&(a._pressedKeysTime[c]=performance.now()-a._pressedKeysTime[c],a._oncePressedKeys[c]=!0)},void 0!==window&&(window.addEventListener("keydown",this._handleKeyDown),window.addEventListener("keyup",this._handleKeyUp))}var e={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE_BREAK:19,"CAPS_LOCK ":20,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,LEFT_WINDOW_KEY:91,RIGHT_WINDOW_KEY:92,SELECT_KEY:93,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,MULTIPLY:106,ADD:107,SUBTRACT:109,DECIMAL_POINT:110,DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUM_LOCK:144,SCROLL_LOCK:145,SEMI_COLON:186,EQUAL_SIGN:187,COMMA:188,DASH:189,PERIOD:190,FORWARD_SLASH:191,GRAVE_ACCENT:192,OPEN_BRACKET:219,BACK_SLASH:220,CLOSE_BRACKET:221,SINGLE_QUOTE:222},f=Object.keys(e);Entropy.Utils.extend(d.prototype,{isPressed:function(a){return this._pressedKeys[e[a]]},getPressedKeys:function(){for(var a,b={},c=0;c<f.length;c++)a=f[c],b[a]=this._pressedKeys[e[a]];return b},getKeysPressedLessThan:function(a){for(var b,c,d={},g=0;g<f.length;g++)b=f[g],c=e[b],this._pressedKeysTime[c]<a&&this._oncePressedKeys[c]&&(d[b]=!0);return d},getKeysPressedMoreThan:function(a){for(var b,c,d={},g=0;g<f.length;g++)b=f[g],c=e[b],this._pressedKeysTime[c]>a&&this._oncePressedKeys[c]&&(d[b]=!0);return d},setMouseStagePosition:function(a){this._mousePosition=a},getMouseStagePosition:function(){return this._mousePosition},clearKeyTimes:function(){this._pressedKeysTime=[],this._oncePressedKeys=[]},update:function(a){this.clearKeyTimes()},destroy:function(){void 0!==window&&(window.removeEventListener("keydown",this._handleKeyDown),window.removeEventListener("keyup",this._handleKeyUp))}}),b.exports=d},{}],9:[function(a,b,c){function d(a){this.AbstractLoader_constructor(a,!0,"howlersound")}function e(a){for(var b,c,d,e,f,g="",h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=new Uint8Array(a),j=i.byteLength,k=j%3,l=j-k,m=0;l>m;m+=3)f=i[m]<<16|i[m+1]<<8|i[m+2],b=(16515072&f)>>18,c=(258048&f)>>12,d=(4032&f)>>6,e=63&f,g+=h[b]+h[c]+h[d]+h[e];return 1==k?(f=i[l],b=(252&f)>>2,c=(3&f)<<4,g+=h[b]+h[c]+"=="):2==k&&(f=i[l]<<8|i[l+1],b=(64512&f)>>10,c=(1008&f)>>4,d=(15&f)<<2,g+=h[b]+h[c]+h[d]+"="),g}var f=(a("path"),{ogg:"audio/ogg",mp3:"audio/mpeg3",wav:"audio/wav"});d.getPreloadHandlers=function(){return{types:["howlersound"],callback:d.preloadHandler}},d.preloadHandler=function(a){var b=new d(a);return b};var g=d;g.PROGRESS=.25,g.canLoadItem=function(a){return"howlersound"===a.type};var h=createjs.extend(d,createjs.AbstractLoader);h._createRequest=function(){var a=this._manifestQueue=new createjs.LoadQueue;this._item.data.forEach(function(b,c){a.loadFile({src:b,type:createjs.AbstractLoader.BINARY})}),this._request=a},h.handleEvent=function(a){switch(a.type){case"complete":var b=this._manifestQueue.getItems(!0);b=b.map(function(a){return"data:"+f[a.item.ext]+";base64,"+e(a.result)});var c=new Howl({src:b,id:this._item.id});return this._result=c,void this._sendComplete();case"progress":return a.loaded*=g.PROGRESS,this.progress=a.loaded/a.total,(isNaN(this.progress)||this.progress==1/0)&&(this.progress=0),void this._sendProgress(a)}this.AbstractLoader_handleEvent(a)},b.exports=createjs.promote(d,"AbstractLoader")},{path:1}],10:[function(a,b,c){function d(){var a=new createjs.LoadQueue;a.installPlugin(e),a.installPlugin(f),this._loader=a}var e=a("./PixiTextureAtlasLoader"),f=a("./HowlerSoundLoader");Entropy.Utils.extend(d.prototype,{getLoader:function(){return this._loader},loadFile:function(){return this._loader.loadFile.apply(this._loader,arguments),this},loadTextureAtlas:function(a,b){return this._loader.loadFile({src:a,type:Entropy.Loader.TEXTUREATLAS},b),this},loadSound:function(a,b){return this._loader.loadFile({id:a.id,src:"this property is not used, but has to be unempty string",data:a.src,type:Entropy.Loader.SOUND},b),this},load:function(){this._loader.load()},on:function(){this._loader.on.apply(this._loader,arguments)},off:function(){this._loader.off.apply(this._loader,arguments)}}),d.TEXTUREATLAS="pixitextureatlas",d.SOUND="howlersound",Entropy.Loader=d},{"./HowlerSoundLoader":9,"./PixiTextureAtlasLoader":11}],11:[function(a,b,c){function d(a){this.AbstractLoader_constructor(a,!0,"pixitextureatlas")}var e=a("path");d.getPreloadHandlers=function(){return{types:["pixitextureatlas"],callback:d.preloadHandler}},d.preloadHandler=function(a){var b=new d(a);return b};var f=d;f.PROGRESS=.25,f.canLoadItem=function(a){return null!=PIXI&&null!=createjs&&"pixitextureatlas"===a.type};var g=createjs.extend(d,createjs.AbstractLoader);g._createRequest=function(){this._request=new createjs.JSONLoader(this._item)},g.handleEvent=function(a){switch(a.type){case"complete":return this._rawResult=a.target.getResult(!0),this._result=a.target.getResult(),this._sendProgress(f.PROGRESS),void this._loadManifest(this._result);case"progress":return a.loaded*=f.PROGRESS,this.progress=a.loaded/a.total,(isNaN(this.progress)||this.progress==1/0)&&(this.progress=0),void this._sendProgress(a)}this.AbstractLoader_handleEvent(a)},g._loadManifest=function(a){if(a&&a.frames){var b=this._manifestQueue=new createjs.LoadQueue;b.on("complete",this._handleManifestComplete,this,!0),b.on("progress",this._handleManifestProgress,this),b.on("error",this._handleManifestError,this,!0),b.loadFile({id:a.meta.image,src:e.join(e.dirname(this._item.src),a.meta.image),data:a})}},g._handleManifestComplete=function(a){var b=this._manifestQueue.getItems(!0);if(!b.length){var c=new createjs.Event("fileerror");return c.item=a.data,void this.dispatchEvent(c)}var d=b[0],e=d.item.data.frames,f=PIXI.utils.getResolutionOfUrl(this._item.src),g=new PIXI.Texture(new PIXI.BaseTexture(d.result));PIXI.utils.TextureCache[d.item.id]=g;for(var h in e){var i=e[h].frame;if(i){var j=null,k=null;if(j=e[h].rotated?new PIXI.Rectangle(i.x,i.y,i.h,i.w):new PIXI.Rectangle(i.x,i.y,i.w,i.h),e[h].trimmed&&(k=new PIXI.Rectangle(e[h].spriteSourceSize.x/f,e[h].spriteSourceSize.y/f,e[h].sourceSize.w/f,e[h].sourceSize.h/f)),e[h].rotated){var l=j.width;j.width=j.height,j.height=l}j.x/=f,j.y/=f,j.width/=f,j.height/=f,PIXI.utils.TextureCache[h]=new PIXI.Texture(g.baseTexture,j,j.clone(),k,e[h].rotated)}}this._sendComplete()},g._handleManifestProgress=function(a){this.progress=a.progress*(1-f.PROGRESS)+f.PROGRESS,this._sendProgress(this.progress)},g._handleManifestError=function(a){var b=new createjs.Event("fileerror");b.item=a.data,this.dispatchEvent(b)},b.exports=createjs.promote(d,"AbstractLoader")},{path:1}],12:[function(a,b,c){a("./Loader")},{"./Loader":10}]},{},[7]);
//# sourceMappingURL=entropy-plugins.map.js